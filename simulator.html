<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orbytt - Crypto Market Cap Simulator</title>
    <link rel="icon" type="image/jpeg" href="IMG_1011.jpeg">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="dark-mode">
    <div id="globalLoader" class="global-loader">
        <div class="loader-circle"></div>
    </div>

    <header>
        <div class="header-content">
            <!-- Make logo/title clickable to home and add same fallback SVG used in portfolio.html -->
            <a href="index.html" style="text-decoration: none; color: inherit;">
                <h1>
                    <div class="logo-wrapper">
                        <img src="IMG_1011.jpeg" alt="Orbytt" class="logo-icon">
                        <!-- Fallback SVG logo (hidden unless image fails) -->
                        <svg class="logo-svg" width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" style="display:none;">
                            <ellipse cx="16" cy="16" rx="14" ry="10" fill="currentColor"/>
                            <ellipse cx="16" cy="16" rx="8" ry="5" fill="var(--bg-primary)"/>
                            <path d="M 28 12 Q 30 16 28 20" fill="none" stroke="var(--bg-primary)" stroke-width="2"/>
                        </svg>
                    </div>
                    Orbytt
                </h1>
            </a>

            <nav class="nav-tabs">
                <a href="simulator.html" class="nav-tab active">
                    <i class="fas fa-calculator"></i>
                    Simulator
                </a>
                <a href="portfolio.html" class="nav-tab">
                    <i class="fas fa-briefcase"></i>
                    Portfolio
                </a>
                <a href="products.html" class="nav-tab">
                    <i class="fas fa-th"></i>
                    Products
                </a>
            </nav>
            <button id="themeToggle" class="theme-toggle">
                <i class="fas fa-sun"></i>
            </button>
        </div>
    </header>

    <!-- Market Stats Bar -->
    <div class="market-stats-bar">
        <div class="market-stat">
            <div class="stat-label">Market Cap</div>
            <div class="stat-value" id="globalMarketCap">$0.00T</div>
        </div>
        <div class="market-stat">
            <div class="stat-label">24h Volume</div>
            <div class="stat-value" id="global24hVolume">$0.00B</div>
        </div>
        <div class="market-stat">
            <div class="stat-label">24h %</div>
            <div class="stat-value" id="marketCapChange">0.00%</div>
        </div>
        <div class="market-stat">
            <div class="stat-label">Fear & Greed</div>
            <div class="stat-value" id="fearGreedIndex">--</div>
        </div>
        <div class="market-stat">
            <div class="stat-label">Stablecoin Share</div>
            <div class="stat-value" id="stablecoinShare">0.0%</div>
        </div>
        <div class="market-stat">
            <div class="stat-label">ETH Gas (gwei)</div>
            <div class="stat-value" id="ethGas">0</div>
        </div>
        <div class="market-stat">
            <div class="stat-label">Top Gainer</div>
            <div class="stat-value" id="topGainer">--</div>
        </div>
        <div class="market-stat">
            <div class="stat-label">Top Loser</div>
            <div class="stat-value" id="topLoser">--</div>
        </div>
        <div class="market-stat">
            <div class="stat-label">Top Volume</div>
            <div class="stat-value" id="topVolume">--</div>
        </div>
    </div>

    <main>
        <section class="page active">
            <div class="simulator-container">
                <div class="simulator-header">
                    <h2>Market Cap Simulator</h2>
                    <p>Calculate what a cryptocurrency's price would be at another coin's market cap</p>
                </div>

                <div class="simulator-content">
                    <div class="comparison-grid">
                        <div class="crypto-selector">
                            <label>Coin X</label>
                            <div class="search-container">
                                <i class="fas fa-search"></i>
                                <input type="text" id="simCoin1Search" placeholder="Search coin..." autocomplete="off">
                            </div>
                            <div id="simCoin1Dropdown" class="coin-dropdown"></div>
                            <div id="sim1Selected" class="selected-coin-display"></div>
                        </div>

                        <div class="crypto-selector">
                            <label>Coin Y</label>
                            <div class="search-container">
                                <i class="fas fa-search"></i>
                                <input type="text" id="simCoin2Search" placeholder="Search coin..." autocomplete="off">
                            </div>
                            <div id="simCoin2Dropdown" class="coin-dropdown"></div>
                            <div id="sim2Selected" class="selected-coin-display"></div>
                        </div>
                    </div>

                    <button id="swapButton" class="btn-secondary">
                        <i class="fas fa-exchange-alt"></i>
                        Swap
                    </button>

                    <button id="calculateButton" class="btn-primary btn-large">
                        <i class="fas fa-calculator"></i>
                        Calculate Price
                    </button>

                    <div id="simulatorResults" class="simulator-results"></div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <p class="footer-text">
                Cryptocurrency data provided by 
                <a href="https://www.coingecko.com/" target="_blank" rel="noopener noreferrer" class="footer-link">
                    <img src="https://static.coingecko.com/s/coingecko-logo-8903d34ce19ca4be1c81f0db30e924154750d208683fad7ae6f2ce06c76d0a56.png" alt="CoinGecko" class="coingecko-logo">
                    CoinGecko
                </a>
            </p>
            <p class="footer-copyright">Â© 2024 Orbytt. All rights reserved.</p>
        </div>
    </footer>

    <script src="portfolio.js"></script>

    <!-- Same tiny fallback script you use on portfolio.html -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const logoImg = document.querySelector('.logo-icon');
            const logoSvg = document.querySelector('.logo-svg');

            if (logoImg) {
                logoImg.onerror = function() {
                    this.style.display = 'none';
                    if (logoSvg) logoSvg.style.display = 'block';
                };

                // If the image failed before onerror bound (e.g., cached failure)
                if (logoImg.complete && logoImg.naturalHeight === 0) {
                    logoImg.style.display = 'none';
                    if (logoSvg) logoSvg.style.display = 'block';
                }
            }
        });
    </script>
</body>
</html>